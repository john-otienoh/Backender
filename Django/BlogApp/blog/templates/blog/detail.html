{% extends "base.html" %}
{% load static %}
{% load blog_markdown %}
{% block title %}{{ post.title }}{% endblock title %}
{% block content %}
<div class="container mt-5">
  <div class="row">
    <div class="col-lg-8">
      <article>
          <!-- Post header-->
          <header class="mb-4">
              <!-- Post title-->
              <h1 class="fw-bolder mb-1">{{ post.title}}</h1>
              <!-- Post meta content-->
              <div class="text-muted fst-italic mb-2">Posted on {{ post.publish }} by <span class="author-badge"><i class="fas fa-user me-1"></i>{{ post.author }}</span></div>
              <!-- Post categories-->
              <a class="badge bg-secondary text-decoration-none link-light" href="#!">Web Design</a>
              <a class="badge bg-secondary text-decoration-none link-light" href="#!">Freebies</a>
          </header>
          <!-- Preview image figure-->
          <figure class="mb-4"><img class="img-fluid rounded" src="https://dummyimage.com/900x400/ced4da/6c757d.jpg" alt="..." /></figure>
            {{ post.body|markdown }}
            <a href="{% url 'blog:share' post.id %}" class="btn btn-success"> Share this post </a>
          </section>
      </article>
      </br>
      
    </div>
    {% include "include/sidebar.html" %}
    <section class="mb-5">
          <div class="row justify-content-center">
              <div class="col-lg-8">
                  <div class="card bg-light">
                      <div class="card-body">
                          <!-- Comments Count -->
                          <div class="text-center my-4">
                              {% with comments.count as total_comments %} 
                                  <h2 class="card-title"> {{ total_comments }} comment{{ total_comments|pluralize }} </h2>
                              {% endwith %}
                          </div>
                          {% include "include/comment_form.html" %}
                          <div class="mb-4">
                              {% for comment in comments %}
                              <div class="d-flex mb-4">
                                  <div class="flex-shrink-0">
                                      <img class="rounded-circle" src="https://dummyimage.com/50x50/007bff/ffffff.jpg&text=J" alt="John Doe" width="50" height="50">
                                  </div>
                                  <div class="ms-3">
                                      <div class="fw-bold">{{ comment.name }}</div>
                                      <p class="text-muted small">{{ comment.created }}</p>
                                      <p>{{ comment.body|linebreaks }}</p>
                                      {% empty %}
                                      <p>There are no comments</p>
                                  </div>
                              </div>
                              {% endfor %}
                          </div>
                      </div>
                  </div>
              </div>
          </div>
      </section>
  </div>
</div>
{% endblock %}
